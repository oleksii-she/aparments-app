import{S as V,C as A}from"./containerAuth-809ecac8.js";import{_ as U,b as I,u as B,r as g,d as L,e as p,o as b,c as S,f as t,a as r,g as o,t as h,h as w,m as R,R as C,i as E,F as z,p as F,k as N,A as P}from"./index-50b7e171.js";import{_ as Z}from"./google-4d24d286.js";const v=n=>(F("data-v-ffeb5de6"),n=n(),N(),n),D=["onSubmit"],$=v(()=>r("h2",{class:"form__title"},"Login",-1)),M={class:"warning__text"},T={class:"warning__text"},j=v(()=>r("a",{href:"https://apartments-backend.onrender.com/api/auth/google"},[r("img",{src:Z,alt:"google-auth-link"})],-1)),q={__name:"login",setup(n){const _=P({position:"top"}),c=I(),u=B(),e=g({email:"",password:""}),a=g({name:"",password:"",email:""}),i=L(!1),k=/^([a-zA-Z0-9._%-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,})$/,x=async()=>{let l=!0;switch(!0){case!e.email:a.email="the field must not be empty",l=!1;break;case!k.test(e.email):a.email="Invalid format email",l=!1;break;default:a.email="";break}switch(!0){case!e.password:a.password="the field must not be empty",l=!1;break;default:a.password="",a.confirmPassword="";break}if(!l)return;const s={email:e.email,password:e.password};try{i.value=!0,await u.login(s),i.value=!1,c.push({name:"apartments"})}catch(m){if(_.error(m.message),u.statusError){i.value=!1,console.log(u.statusError);return}}};return(l,s)=>{const m=p("ULoader"),f=p("UInput"),y=p("UButton");return b(),S(z,null,[t(m,{loading:i.value},null,8,["loading"]),r("form",{class:"form__auth",onSubmit:E(x,["prevent","stop"])},[$,t(f,{class:"input_margin",modelValue:e.email,"onUpdate:modelValue":s[0]||(s[0]=d=>e.email=d),placeholder:"Email",type:"email"},{default:o(()=>[r("p",M,h(a.email),1)]),_:1},8,["modelValue"]),t(f,{class:"input_margin",modelValue:e.password,"onUpdate:modelValue":s[1]||(s[1]=d=>e.password=d),placeholder:"Password",type:"password"},{default:o(()=>[r("p",T,h(a.password),1)]),_:1},8,["modelValue"]),j,t(R(C),{to:{name:"registration"}},{default:o(()=>[w("Register in another way")]),_:1}),t(y,null,{default:o(()=>[w("Вхід")]),_:1})],40,D)],64)}}},G=U(q,[["__scopeId","data-v-ffeb5de6"]]),O={__name:"loginPage",setup(n){return(_,c)=>(b(),S("main",null,[t(V,null,{default:o(()=>[t(A,null,{default:o(()=>[t(G)]),_:1})]),_:1})]))}};export{O as default};
