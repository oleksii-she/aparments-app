import{S as M,C as x}from"./containerAuth-a5035e42.js";import{_ as A,u as I,b,r as g,d as c,w as z,e as f,o as h,c as V,f as n,g as _,h as B,i as C,p as N,j as Z,a as E}from"./index-2462ae2c.js";import{c as L}from"./formatPhoneNumber-71850dfd.js";const v=(o,r,m)=>({hasPassed:o.length>r&&o.length<m,message:o.length<r?"Поле має містити більше символів":"Поле має містити менше символів"}),w=o=>{const r=v(o,8,256);return r.hasPassed?{hasPassed:/^(?=.*[A-Za-z])(?=.*[\d])[a-zA-Z0-9]{7,256}$/.test(o),message:"Придумайте складніший пароль"}:r},$=o=>({hasPassed:/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/.test(o),message:"Невірно написаний email"});const k=o=>(N("data-v-19dad14a"),o=o(),Z(),o),R=["onSubmit"],j=k(()=>E("h2",{class:"form__title"},"Реєстрація",-1)),D={__name:"registrarion",setup(o){const r=I(),m=b(),a=g({name:"",email:"",phone:"",password:"",confirmPassword:""}),u=c(!1),p=c(!1),t=g({name:"",email:"",password:"",confirmPassword:""}),P=[{name:"name",validator:l=>v(l,3,10)},{name:"email",validator:$},{name:"password",validator:w},{name:"confirmPassword",validator:w}],U=c(!1);z(a,()=>{let l=!0;for(let e of P){const i=e.name,d=e.validator(a[i]);a[i]&&(d.hasPassed?t[i]="":(t[i]=d.message,l=!1))}a.confirmPassword&&(a.password!==a.confirmPassword?(t.password="Паролі не співпадають",t.confirmPassword="Паролі не співпадають",l=!1):(t.password="",t.confirmPassword="")),U.value=l});const S=async()=>{const l=L(a.phone),e={name:a.name,email:a.email,phone:l,password:a.password};if(!e.name||!e.email||!e.password||!e.phone)return console.log("Всі поля повинні бути заповненні");try{if(u.value)p.value=!0,await r.register(e),p.value=!1,m.push({name:"home"});else return console.log("Всі поля повинні бути заповненні")}catch{if(r.statusError){console.log(r.statusError);return}}};return(l,e)=>{const i=f("ULoader"),d=f("UInput"),y=f("UButton");return h(),V("form",{class:"form__auth",onSubmit:C(S,["prevent","stop"])},[j,n(i,{loading:p.value},null,8,["loading"]),n(d,{class:"input_margin",modelValue:a.name,"onUpdate:modelValue":e[0]||(e[0]=s=>a.name=s),placeholder:"Name",type:"text",errorMessage:t.name,"onUpdate:isValid":e[1]||(e[1]=s=>u.value=s)},null,8,["modelValue","errorMessage"]),n(d,{class:"input_margin",modelValue:a.email,"onUpdate:modelValue":e[2]||(e[2]=s=>a.email=s),placeholder:"Email",type:"email",errorMessage:t.email,"onUpdate:isValid":e[3]||(e[3]=s=>u.value=s)},null,8,["modelValue","errorMessage"]),n(d,{class:"input_margin",modelValue:a.phone,"onUpdate:modelValue":e[4]||(e[4]=s=>a.phone=s),placeholder:"Phone",type:"tel","onUpdate:isValid":e[5]||(e[5]=s=>u.value=s)},null,8,["modelValue"]),n(d,{class:"input_margin",modelValue:a.password,"onUpdate:modelValue":e[6]||(e[6]=s=>a.password=s),placeholder:"Password",type:"password",errorMessage:t.password},null,8,["modelValue","errorMessage"]),n(d,{class:"input_margin",modelValue:a.confirmPassword,"onUpdate:modelValue":e[7]||(e[7]=s=>a.confirmPassword=s),placeholder:"Confirm password",type:"password",errorMessage:t.confirmPassword},null,8,["modelValue","errorMessage"]),n(y,null,{default:_(()=>[B("Зареєструвати")]),_:1})],40,R)}}},T=A(D,[["__scopeId","data-v-19dad14a"]]),H={__name:"registrationPage",setup(o){return(r,m)=>(h(),V("main",null,[n(M,null,{default:_(()=>[n(x,null,{default:_(()=>[n(T)]),_:1})]),_:1})]))}};export{H as default};
