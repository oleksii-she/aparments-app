import{S as N,C as z}from"./containerAuth-b4878231.js";import{_ as B,u as L,b as R,r as v,d as _,w as Z,e as f,o as y,c as b,f as n,a as m,g as h,h as P,i as $,j as E,p as j,k as D,A as T,l as W}from"./index-d7a28e21.js";import{_ as q}from"./google-4d24d286.js";const U=(a,r,u)=>({hasPassed:a.length>r&&a.length<u,message:a.length<r?"Поле має містити більше символів":"Поле має містити менше символів"}),V=a=>{const r=U(a,8,256);return r.hasPassed?{hasPassed:/^(?=.*[A-Za-z])(?=.*[\d])[a-zA-Z0-9]{7,256}$/.test(a),message:"Придумайте складніший пароль"}:r},F=a=>({hasPassed:/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/.test(a),message:"Невірно написаний email"});const g=a=>(j("data-v-92e284b5"),a=a(),D(),a),G=W+"#icon-eyes",H=["onSubmit"],J=g(()=>m("h2",{class:"form__title"},"Реєстрація",-1)),K={class:"wrapper-password"},O=g(()=>m("svg",{class:"eyes-icon"},[m("use",{"xlink:href":G})],-1)),Q=[O],X=g(()=>m("a",{href:"https://apartments-backend.onrender.com/api/auth/google"},[m("img",{src:q,alt:"google-auth-link"})],-1)),Y={__name:"registrarion",setup(a){const r=T({position:"top"}),u=L(),S=R(),s=v({name:"",email:"",phone:"",password:"",confirmPassword:""}),p=_(!1),c=_(!1),w=_(!1),l=v({name:"",email:"",password:"",confirmPassword:""}),x=[{name:"name",validator:i=>U(i,3,10)},{name:"email",validator:F},{name:"password",validator:V},{name:"confirmPassword",validator:V}],A=_(!1);Z(s,()=>{let i=!0;for(let e of x){const t=e.name,d=e.validator(s[t]);s[t]&&(d.hasPassed?l[t]="":(l[t]=d.message,i=!1))}s.confirmPassword&&(s.password!==s.confirmPassword?(l.password="Passwords do not match",l.confirmPassword="Passwords do not match",i=!1):(l.password="",l.confirmPassword="")),A.value=i});const k=async()=>{const i=/^(\+|\d{2})\d{12,15}$/,e=E(s.phone);if(console.log(e),!i.test(e))return r.warning("Wrongly entered number");const t={name:s.name,email:s.email,phone:e,password:s.password};if(!t.name||!t.email||!t.password||!t.phone)return r.warning("Всі поля повинні бути заповненні");try{if(p.value)c.value=!0,await u.register(t),c.value=!1,S.push({name:"home"});else return r.warning("Всі поля повинні бути заповненні")}catch{return c.value=!1,r.warning(u.statusError)}},M=()=>{w.value=!w.value};return(i,e)=>{const t=f("ULoader"),d=f("UInput"),C=f("RouterLink"),I=f("UButton");return y(),b("form",{class:"form__auth",onSubmit:$(k,["prevent","stop"])},[J,n(t,{loading:c.value},null,8,["loading"]),n(d,{modelValue:s.name,"onUpdate:modelValue":e[0]||(e[0]=o=>s.name=o),placeholder:"Name",type:"text",errorMessage:l.name,"onUpdate:isValid":e[1]||(e[1]=o=>p.value=o)},null,8,["modelValue","errorMessage"]),n(d,{modelValue:s.email,"onUpdate:modelValue":e[2]||(e[2]=o=>s.email=o),placeholder:"Email",type:"email",errorMessage:l.email,"onUpdate:isValid":e[3]||(e[3]=o=>p.value=o)},null,8,["modelValue","errorMessage"]),n(d,{modelValue:s.phone,"onUpdate:modelValue":e[4]||(e[4]=o=>s.phone=o),placeholder:"Phone",type:"tel","onUpdate:isValid":e[5]||(e[5]=o=>p.value=o)},null,8,["modelValue"]),m("div",K,[n(d,{modelValue:s.password,"onUpdate:modelValue":e[6]||(e[6]=o=>s.password=o),placeholder:"Password",type:"password",errorMessage:l.password,showPassword:w.value},null,8,["modelValue","errorMessage","showPassword"]),m("button",{type:"button",class:"button-eyes",onClick:M},Q)]),n(d,{modelValue:s.confirmPassword,"onUpdate:modelValue":e[7]||(e[7]=o=>s.confirmPassword=o),placeholder:"Confirm password",type:"password",errorMessage:l.confirmPassword,showPassword:w.value},null,8,["modelValue","errorMessage","showPassword"]),X,n(C,{to:{name:"login"}},{default:h(()=>[P("Enter in another way")]),_:1}),n(I,null,{default:h(()=>[P("Зареєструвати")]),_:1})],40,H)}}},ee=B(Y,[["__scopeId","data-v-92e284b5"]]),te={__name:"registrationPage",setup(a){return(r,u)=>(y(),b("main",null,[n(N,null,{default:h(()=>[n(z,null,{default:h(()=>[n(ee)]),_:1})]),_:1})]))}};export{te as default};
