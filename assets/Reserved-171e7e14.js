import{_ as A,b as H,o as n,c as a,a as e,F as j,B as U,E as V,t as d,x as I,a8 as y,d as h,q as w,e as G,Q as z,v as O,g as p,p as P,k as q,l as L,ab as Q,a7 as J,n as K,ai as W,aj as X,m as c,f,ak as T,y as x,h as C}from"./index-7dc6413b.js";const Y={class:"wrapper"},Z={class:"reserve-list"},ee={class:"reserve"},se={class:"reserve__top"},te={class:"reserve__title"},re={key:0},oe={class:"reserve__description"},ne=["onClick"],ae={__name:"reserveMessageList",props:{reserves:Array,handlerIdGet:{type:Function,default:()=>{}}},setup(s){const _=s,v=H(),t=o=>{const l=y(),r=y(o);return r.isSame(l,"day")?r.format("HH:mm:ss"):r.format("MM.DD")},m=o=>{_.handlerIdGet(o),v.push(`/myaccount/reserved/${o}`)};return(o,l)=>(n(),a("div",Y,[e("ul",Z,[(n(!0),a(j,null,U(s.reserves,r=>(n(),a("li",{class:"reserve-list__item",key:r._id},[e("div",ee,[e("div",se,[e("p",te,d(r.name),1),e("p",null,d(t(r.updatedAt)),1)]),e("p",null,d(r._id),1),r.apartmentName?(n(),a("p",re,d(r.apartmentName),1)):I("",!0),e("p",oe,d(r.description),1),e("button",{onClick:g=>m(r._id)},"Show Info",8,ne)])]))),128)),V(o.$slots,"default",{},void 0,!0)])]))}},R=A(ae,[["__scopeId","data-v-8b8e058e"]]);const M=s=>(P("data-v-66262a9a"),s=s(),q(),s),de=L+"#icon-reserved",ie=L+"#icon-delete",le={key:0,class:"wrapper-info"},ce={class:"header"},ve={class:"info"},_e={class:"info__header-text"},ue={class:"info__email-link",href:"mailto:{{ reserveInfo.email }}"},fe={class:"button-box"},he=M(()=>e("use",{"xlink:href":de},null,-1)),pe=[he],me=M(()=>e("button",{type:"",class:"button"},[e("svg",{class:"button__icon"},[e("use",{"xlink:href":ie})])],-1)),ge=["src"],Ie={class:"price-date"},ye={class:"price-date__text"},be={class:"price-date__text"},ke={class:"price-date__text"},$e={class:"price-date__text"},xe={class:"description-box"},Re={class:"description-box__date"},we={class:"description-box__description"},Me={key:1,class:"wrapper-info-default"},Se=M(()=>e("div",null,[e("h2",null,"Select a message to read it")],-1)),De=[Se],Te={__name:"reserveMessageInfo",props:{reserveInfo:Object,updateReserve:{type:Function,default:()=>{}}},setup(s){const _=s,v=h(null);w(async()=>{if(_.reserveInfo&&typeof _.reserveInfo.reserved<"u"){const o=_.reserveInfo.reserved;v.value=o}});const t=o=>{const l=y(),r=y(o);return r.isSame(l,"day")?r.format("HH:mm:ss"):r.format("MM.DD")},m=o=>{v.value||(v.value=!0,_.updateReserve(o))};return(o,l)=>{const r=G("RouterLink");return s.reserveInfo?(n(),a("div",le,[e("div",ce,[e("div",ve,[e("p",_e,"Name: "+d(s.reserveInfo.name),1),e("a",ue,d(s.reserveInfo.email),1)]),e("div",fe,[e("button",{type:"",class:"button",onClick:l[0]||(l[0]=g=>m(s.reserveInfo.apartmentId))},[(n(),a("svg",{class:z(["button__icon-reserved",{"button__icon-reserved---active":v.value}])},pe,2))]),me])]),e("div",null,[s.reserveInfo.apartmentId?(n(),O(r,{key:0,to:{name:"review-page",params:{id:s.reserveInfo.apartmentId}},class:"wrapper-info__apartment-link"},{default:p(()=>[e("img",{src:s.reserveInfo.coverImage,alt:"",width:"64"},null,8,ge),e("p",null,d(s.reserveInfo.apartmentName),1)]),_:1},8,["to"])):I("",!0)]),e("div",null,[e("div",Ie,[e("div",null,[e("p",ye,"sum: "+d(s.reserveInfo.sum)+"$",1),e("p",be,"number of days: "+d(s.reserveInfo.numberOfDays),1)]),e("div",null,[e("p",ke,"Start date: "+d(s.reserveInfo.startDate)+"$",1),e("p",$e,"End date: "+d(s.reserveInfo.endDate),1)])])]),e("div",xe,[e("p",Re,d(t(s.reserveInfo.updatedAt)),1),e("p",we,d(s.reserveInfo.description),1)])])):(n(),a("div",Me,De))}}},Ce=A(Te,[["__scopeId","data-v-66262a9a"]]);const Ae={class:"container"},Ge={key:0,class:"reserved-wrapper reserved-mobile"},Le=e("h2",{style:{"text-align":"center","margin-bottom":"20px"}},"Reserved",-1),Ne={key:0},Be={key:1,class:"reserved-wrapper"},Ee={key:0,class:"reserved-box"},Fe=e("h2",null,"In reserve",-1),He={key:0},je={key:1,class:"reserved-box"},Ue=e("h2",null,"Reserved",-1),Ve={key:0},ze={class:"reserved-wrapper__info"},Pe={__name:"Reserved",setup(s){const _=Q(),{id:v}=_.params,t=J(),m=K(),o=h(null),l=h(!1),r=h(1);h(null);const g=h(!1),{isMobile:N}=W(),B=h(null);w(async()=>{await t.fetchGetAllReserve(),t.reserves.length!==t.totalReservePost&&await t.fetchGetAllReserve(r.value)}),w(async()=>{let i=o.value;i||(i=v),t.reserversIdInfo(i)});const b=()=>{l.value=!l.value},k=i=>{t.reserves<=9||i&&(t.reserves.length!==t.totalReservePost&&(r.value=1),console.log(i))},S=i=>{o.value=i,t.reserversIdInfo(v)},E=async i=>{try{const u=await m.updateApartmentReserved(i,{reserved:!0});B.value=u.reserved,await t.fetchGetAllReserve()}catch(u){console.log(u.message)}};return(i,u)=>{const D=G("UButton"),$=X("observe-visibility");return n(),a("div",Ae,[c(N)?(n(),a("div",Ge,[Le,f(T,{loading:c(t).loading},null,8,["loading"]),f(R,{reserves:c(t).reserves,hideModalToggle:b,handlerId:i.handlerId},{default:p(()=>[c(t).reserves.length?x((n(),a("div",Ne,null,512)),[[$,k]]):I("",!0)]),_:1},8,["reserves","handlerId"])])):(n(),a("div",Be,[g.value?(n(),a("div",Ee,[f(D,{style:{width:"250px"},onClick:u[0]||(u[0]=F=>g.value=!1)},{default:p(()=>[C("Reserved")]),_:1}),Fe,f(R,{reserves:c(t).reservesReserved,hideModalToggle:b,handlerIdGet:S},{default:p(()=>[c(t).reserves.length>9?x((n(),a("div",He,null,512)),[[$,k]]):I("",!0)]),_:1},8,["reserves"])])):(n(),a("div",je,[f(D,{style:{width:"250px"},onClick:u[1]||(u[1]=F=>g.value=!0)},{default:p(()=>[C("In reserve")]),_:1}),Ue,f(R,{reserves:c(t).reserves,hideModalToggle:b,handlerIdGet:S},{default:p(()=>[c(t).reserves.length>9?x((n(),a("div",Ve,null,512)),[[$,k]]):I("",!0)]),_:1},8,["reserves"])])),f(T,{loading:c(t).loading},null,8,["loading"]),e("div",ze,[f(Ce,{reserveInfo:c(t).reserveId,updateReserve:E},null,8,["reserveInfo"])])]))])}}};export{Pe as default};
