import{_ as P,R as N,b as q,S as A,d as B,u as D,r as x,O as E,e as $,o as r,c as p,a as e,t as h,h as y,s as c,m as L,P as b,q as k,f as w,g as R,T as z,V as F,W as T,X as j,p as O,j as W,z as S}from"./index-2462ae2c.js";import{c as X,f as G}from"./formatPhoneNumber-71850dfd.js";const m=u=>(O("data-v-8c931b1e"),u=u(),W(),u),U=S+"#icon-edit",V=S+"#icon-confirm",H={class:"container user-page"},J={class:"home-page__wrapper"},K={class:"user"},M={class:"wrapper"},Q={key:0,class:"user__text-wrapper"},Y={class:"user__text"},Z=m(()=>e("svg",{class:"btn-edit__icon"},[e("use",{"xlink:href":U})],-1)),ee=[Z],te={key:1,class:"user__text-wrapper"},se={class:"user__text"},ae=["value"],ne=m(()=>e("svg",{class:"btn-edit__icon"},[e("use",{"xlink:href":V})],-1)),oe=[ne],re={class:"user__text-wrapper"},ce={class:"user__text"},ie={class:"wrapper"},_e={key:0,class:"user__text-wrapper"},le={class:"user__text"},pe=m(()=>e("svg",{class:"btn-edit__icon"},[e("use",{"xlink:href":U})],-1)),ue=[pe],de={key:1,class:"user__text-wrapper"},me={class:"user__text"},he=["value"],ge=m(()=>e("svg",{class:"btn-edit__icon"},[e("use",{"xlink:href":V})],-1)),ve=[ge],fe={__name:"UserPage",setup(u){const g=N(),C=q(),I=9,i=A(),_=B(parseInt(g.query.page)||1),l=D(),o=x({name:!1,phone:!1}),n=x({name:"",phone:""});E(()=>{const{id:a}=l;C.push({query:{...g.query,page:_.value}}),i.fetchUserApartments(a,_.value),n.name=l.name;const t=G(l.phone);n.phone=t});const v=a=>{if(a.target.name==="name"&&(n.name=a.target.value),a.target.name==="phone"){const t=a.target.value;/^\+38\(\d{3}\)\d{3}-\d{2}-\d{2}$/.test(t)&&(n.phone=a.target.value)}},f=async()=>{try{const a=X(n.phone),t=n.name,d={phone:a,name:t};await l.fetchUpdateUser(d),o.phone=!1,o.name=!1}catch{o.phone=!1,o.name=!1}};return(a,t)=>{const d=$("ULoader");return r(),p("main",null,[e("section",null,[e("div",H,[e("div",J,[e("div",K,[e("div",M,[o.name?(r(),p("div",te,[e("label",se,[y(" і’мя: "),e("input",{class:"user__input-rename",name:"name",value:n.name,onChange:v},null,40,ae)]),e("button",{onClick:f,class:"btn-edit"},oe)])):(r(),p("div",Q,[e("p",Y,"і’мя: "+h(n.name),1),e("button",{onClick:t[0]||(t[0]=s=>o.name=!0),class:"btn-edit"},ee)]))]),e("div",re,[e("p",ce,"E-mail: "+h(c(l).email),1)]),e("div",ie,[o.phone?(r(),p("div",de,[e("label",me,[y(" Телефон: "),L(e("input",{ref:"phoneInput",class:"user__input-rename",type:"tel",name:"phone",value:n.phone,onChange:v},null,40,he),[[c(T),{mask:"+38(0##)###-##-##"}]])]),e("button",{onClick:f,class:"btn-edit"},ve)])):(r(),p("div",_e,[e("p",le,"Телефон: "+h(n.phone),1),e("button",{onClick:t[1]||(t[1]=s=>o.phone=!0),class:"btn-edit"},ue)]))])]),e("div",null,[c(i).loading?(r(),b(d,{key:0,loading:!0})):k("",!0),w(z,{apartments:c(i).apartments},{apartment:R(s=>[w(j,{id:s.apartment._id,coverImage:s.apartment.coverImage,description:s.apartment.description,price:s.apartment.price,longStayPrice:s.apartment.longStayPrice,country:s.apartment.country,rating:s.apartment.rating},null,8,["id","coverImage","description","price","longStayPrice","country","rating"])]),_:1},8,["apartments"])])]),c(i).apartments.length>7?(r(),b(F,{key:0,class:"paginate",modelValue:_.value,"onUpdate:modelValue":t[2]||(t[2]=s=>_.value=s),perPage:I,rangeSize:1,"active-color":"#DCEDFF","onUpdate:value":t[3]||(t[3]=s=>_.value=s),totalPost:c(i).totalPosts},null,8,["modelValue","totalPost"])):k("",!0)])])])}}},be=P(fe,[["__scopeId","data-v-8c931b1e"]]);export{be as default};
