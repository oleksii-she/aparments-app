import{S as I,C as N}from"./containerAuth-b26a950a.js";import{_ as z,u as B,b as L,r as v,d as w,w as R,e as _,o as y,c as U,f as n,a as m,g,h as P,i as Z,j as $,p as E,k as j,A as D,l as T}from"./index-41a5b64e.js";import{_ as W}from"./google-4d24d286.js";const b=(a,r,u)=>({hasPassed:a.length>r&&a.length<u,message:a.length<r?"Поле має містити більше символів":"Поле має містити менше символів"}),V=a=>{const r=b(a,8,256);return r.hasPassed?{hasPassed:/^(?=.*[A-Za-z])(?=.*[\d])[a-zA-Z0-9]{7,256}$/.test(a),message:"Придумайте складніший пароль"}:r},q=a=>({hasPassed:/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/.test(a),message:"Невірно написаний email"});const h=a=>(E("data-v-8167efe6"),a=a(),j(),a),F=T+"#icon-eyes",G=["onSubmit"],H=h(()=>m("h2",{class:"form__title"},"Реєстрація",-1)),J={class:"wrapper-password"},K=h(()=>m("svg",{class:"eyes-icon"},[m("use",{"xlink:href":F})],-1)),O=[K],Q=h(()=>m("a",{href:"https://apartments-backend.onrender.com/api/auth/google"},[m("img",{src:W,alt:"google-auth-link"})],-1)),X={__name:"registrarion",setup(a){const r=D({position:"top"}),u=B(),A=L(),s=v({name:"",email:"",phone:"",password:"",confirmPassword:""}),p=w(!1),c=w(!1),f=w(!1),l=v({name:"",email:"",password:"",confirmPassword:""}),S=[{name:"name",validator:i=>b(i,3,10)},{name:"email",validator:q},{name:"password",validator:V},{name:"confirmPassword",validator:V}],x=w(!1);R(s,()=>{let i=!0;for(let e of S){const t=e.name,d=e.validator(s[t]);s[t]&&(d.hasPassed?l[t]="":(l[t]=d.message,i=!1))}s.confirmPassword&&(s.password!==s.confirmPassword?(l.password="Passwords do not match",l.confirmPassword="Passwords do not match",i=!1):(l.password="",l.confirmPassword="")),x.value=i});const k=async()=>{const i=/^(\+|\d{2})\d{12,15}$/,e=$(s.phone);if(console.log(e),!i.test(e))return r.warning("Wrongly entered number");const t={name:s.name,email:s.email,phone:e,password:s.password};if(!t.name||!t.email||!t.password||!t.phone)return r.warning("All fields must be filled");try{if(p.value)c.value=!0,await u.register(t),c.value=!1,A.push({name:"apartments"});else return r.warning("All fields must be filled")}catch{return c.value=!1,r.warning(u.statusError)}};return(i,e)=>{const t=_("ULoader"),d=_("UInput"),M=_("RouterLink"),C=_("UButton");return y(),U("form",{class:"form__auth",onSubmit:Z(k,["prevent","stop"])},[H,n(t,{loading:c.value},null,8,["loading"]),n(d,{modelValue:s.name,"onUpdate:modelValue":e[0]||(e[0]=o=>s.name=o),placeholder:"Name",type:"text",errorMessage:l.name,"onUpdate:isValid":e[1]||(e[1]=o=>p.value=o)},null,8,["modelValue","errorMessage"]),n(d,{modelValue:s.email,"onUpdate:modelValue":e[2]||(e[2]=o=>s.email=o),placeholder:"Email",type:"email",errorMessage:l.email,"onUpdate:isValid":e[3]||(e[3]=o=>p.value=o)},null,8,["modelValue","errorMessage"]),n(d,{modelValue:s.phone,"onUpdate:modelValue":e[4]||(e[4]=o=>s.phone=o),placeholder:"Phone",type:"tel","onUpdate:isValid":e[5]||(e[5]=o=>p.value=o)},null,8,["modelValue"]),m("div",J,[n(d,{modelValue:s.password,"onUpdate:modelValue":e[6]||(e[6]=o=>s.password=o),placeholder:"Password",type:"password",errorMessage:l.password,showPassword:f.value},null,8,["modelValue","errorMessage","showPassword"]),m("button",{type:"button",class:"button-eyes",onClick:e[7]||(e[7]=o=>f.value=!f.value)},O)]),n(d,{modelValue:s.confirmPassword,"onUpdate:modelValue":e[8]||(e[8]=o=>s.confirmPassword=o),placeholder:"Confirm password",type:"password",errorMessage:l.confirmPassword,showPassword:f.value},null,8,["modelValue","errorMessage","showPassword"]),Q,n(M,{to:{name:"login"}},{default:g(()=>[P("Enter in another way")]),_:1}),n(C,null,{default:g(()=>[P("Зареєструвати")]),_:1})],40,G)}}},Y=z(X,[["__scopeId","data-v-8167efe6"]]),ae={__name:"registrationPage",setup(a){return(r,u)=>(y(),U("main",null,[n(I,null,{default:g(()=>[n(N,null,{default:g(()=>[n(Y)]),_:1})]),_:1})]))}};export{ae as default};
