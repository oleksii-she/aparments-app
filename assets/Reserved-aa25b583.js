import{_ as F,aa as H,b as V,d as g,q as D,o as r,c as o,a as e,F as q,B as J,E as K,$ as P,t as l,x as k,a7 as T,e as U,v as Q,g as f,p as W,j as X,l as z,a6 as Y,n as Z,aj as ee,ak as se,f as d,m as i,al as j,h as b,y as M}from"./index-549ba1d3.js";import{B as te}from"./BackBtn-9f7d4839.js";const re={class:"wrapper"},oe={class:"reserve-list"},ne=["onClick"],ae={class:"reserve__top"},de={class:"reserve__title"},ie={key:0},le={class:"reserve__description"},ce={__name:"reserveMessageList",props:{reserves:Array,handlerIdGet:{type:Function,default:()=>{}}},setup(t){const m=t,h=H(),s=V(),I=g(null);D(()=>{I.value=h.params.id});const c=n=>{const u=T(),a=T(n);return a.isSame(u,"day")?a.format("HH:mm:ss"):a.format("MM.DD")},p=n=>{m.handlerIdGet(n),s.push(`/myaccount/reserved/${n}`)};return(n,u)=>(r(),o("div",re,[e("ul",oe,[(r(!0),o(q,null,J(t.reserves,a=>(r(),o("li",{class:"reserve-list__item",key:a._id},[e("div",{class:P(["reserve",{"reserve-active":I.value===a._id}]),onClick:G=>p(a._id)},[e("div",ae,[e("p",de,l(a.name),1),e("p",null,l(c(a.updatedAt)),1)]),a.apartmentName?(r(),o("p",ie,l(a.apartmentName),1)):k("",!0),e("p",le,l(a.description),1)],10,ne)]))),128)),K(n.$slots,"default",{},void 0,!0)])]))}},S=F(ce,[["__scopeId","data-v-75f7927b"]]);const B=t=>(W("data-v-8fecbefd"),t=t(),X(),t),ve=z+"#icon-reserved",_e=z+"#icon-delete",ue={key:0,class:"wrapper-info"},fe={class:"header"},he={class:"info"},pe={class:"info__header-text"},me={class:"info__email-link",href:"mailto:{{ reserveInfo.email }}"},ge={class:"button-box"},Ie=B(()=>e("use",{"xlink:href":ve},null,-1)),ye=[Ie],ke=B(()=>e("button",{type:"",class:"button"},[e("svg",{class:"button__icon"},[e("use",{"xlink:href":_e})])],-1)),be=["src"],$e={class:"price-date"},xe={class:"price-date__text"},Re={class:"price-date__text"},we={class:"price-date__text"},Me={class:"price-date__text"},Se={class:"description-box"},De={class:"description-box__date"},Te={class:"description-box__description"},Ce={key:1,class:"wrapper-info-default"},Be=B(()=>e("div",null,[e("h2",null,"Select a message to read it")],-1)),Ge=[Be],Ae={__name:"reserveMessageInfo",props:{reserveInfo:Object,updateReserve:{type:Function,default:()=>{}}},setup(t){const m=t,h=g(null);D(async()=>{if(m.reserveInfo&&typeof m.reserveInfo.reserved<"u"){const c=m.reserveInfo.reserved;h.value=c}});const s=c=>{const p=T(),n=T(c);return n.isSame(p,"day")?n.format("HH:mm:ss"):n.format("MM.DD")},I=c=>{h.value=!0,m.updateReserve(c)};return(c,p)=>{const n=U("RouterLink");return t.reserveInfo?(r(),o("div",ue,[e("div",fe,[e("div",he,[e("p",pe,"Name: "+l(t.reserveInfo.name),1),e("a",me,l(t.reserveInfo.email),1)]),e("div",ge,[e("button",{type:"",class:"button",onClick:p[0]||(p[0]=u=>I(t.reserveInfo.apartmentId))},[(r(),o("svg",{class:P(["button__icon-reserved",{"button__icon-reserved---active":h.value}])},ye,2))]),ke])]),e("div",null,[t.reserveInfo.apartmentId?(r(),Q(n,{key:0,to:{name:"review-page",params:{id:t.reserveInfo.apartmentId}},class:"wrapper-info__apartment-link"},{default:f(()=>[e("img",{src:t.reserveInfo.coverImage,alt:"",width:"64"},null,8,be),e("p",null,l(t.reserveInfo.apartmentName),1)]),_:1},8,["to"])):k("",!0)]),e("div",null,[e("div",$e,[e("div",null,[e("p",xe,"sum: "+l(t.reserveInfo.sum)+"$",1),e("p",Re,"number of days: "+l(t.reserveInfo.numberOfDays),1)]),e("div",null,[e("p",we,"Start date: "+l(t.reserveInfo.startDate)+"$",1),e("p",Me,"End date: "+l(t.reserveInfo.endDate),1)])])]),e("div",Se,[e("p",De,l(s(t.reserveInfo.updatedAt)),1),e("p",Te,l(t.reserveInfo.description),1)])])):(r(),o("div",Ce,Ge))}}},E=F(Ae,[["__scopeId","data-v-8fecbefd"]]);const Le={class:"container"},Ne={key:0,class:"reserved-wrapper reserved-mobile"},je={key:0},Ee={key:0,class:"reserved-box"},Fe=e("h2",{style:{"text-align":"center","margin-bottom":"20px"}},"In reserve",-1),He={key:0},Ve={key:1,class:"reserved-box"},Pe=e("h2",{style:{"text-align":"center","margin-bottom":"20px"}},"Reserved",-1),Ue={key:0},ze={key:1,class:"reserved-wrapper__info"},Oe={key:1,class:"reserved-wrapper"},qe={key:0,class:"reserved-box"},Je=e("h2",null,"In reserve",-1),Ke={key:0},Qe={key:1,class:"reserved-box"},We=e("h2",null,"Reserved",-1),Xe={key:0},Ye={class:"reserved-wrapper__info"},ss={__name:"Reserved",setup(t){const m=H(),{id:h}=m.params,s=Y(),I=Z(),c=g(null),p=g(!1),n=g(1),u=g(!1),{isMobile:a}=ee(),G=g(null),C=g(!1);D(async()=>{await s.fetchGetAllReserve(),s.reserves.length!==s.totalReservePost&&await s.fetchGetAllReserve(n.value)});const O=V();D(async()=>{let v=c.value;v||(v=h),s.reserversIdInfo(v),s.reservesReserved.find(y=>y._id===h)&&(u.value=!0)});const $=()=>{p.value=!p.value},x=v=>{s.reserves<=9||v&&s.reserves.length!==s.totalReservePost&&(n.value=1)},R=v=>{c.value=v,s.reserversIdInfo(h),v&&(C.value=!0)},A=async v=>{try{const _=await I.updateApartmentReserved(v,{reserved:!0});G.value=_.reserved,await s.fetchGetAllReserve()}catch(_){console.log(_.message)}},L=()=>{C.value=!1,O.push("/myaccount/reserved")};return(v,_)=>{const y=U("UButton"),w=se("observe-visibility");return r(),o("div",Le,[d(j,{loading:i(s).loading},null,8,["loading"]),i(a)?(r(),o("div",Ne,[C.value?(r(),o("div",ze,[d(te,{class:"button-back",onClick:L},{default:f(()=>[b("back")]),_:1}),d(E,{reserveInfo:i(s).reserveId,updateReserve:A},null,8,["reserveInfo"])])):(r(),o("div",je,[u.value?(r(),o("div",Ee,[d(y,{style:{width:"150px",height:"50px"},onClick:_[0]||(_[0]=N=>u.value=!1)},{default:f(()=>[b("Reserved")]),_:1}),Fe,d(S,{reserves:i(s).reservesReserved,hideModalToggle:$,handlerIdGet:R},{default:f(()=>[i(s).reserves.length?M((r(),o("div",He,null,512)),[[w,x]]):k("",!0)]),_:1},8,["reserves"])])):(r(),o("div",Ve,[d(y,{style:{width:"150px",height:"50px"},onClick:_[1]||(_[1]=N=>u.value=!0)},{default:f(()=>[b("In reserve")]),_:1}),Pe,d(S,{reserves:i(s).reserves,hideModalToggle:$,handlerIdGet:R},{default:f(()=>[i(s).reserves.length?M((r(),o("div",Ue,null,512)),[[w,x]]):k("",!0)]),_:1},8,["reserves"])]))]))])):(r(),o("div",Oe,[u.value?(r(),o("div",qe,[d(y,{style:{width:"250px"},onClick:_[2]||(_[2]=N=>u.value=!1)},{default:f(()=>[b("Reserved")]),_:1}),Je,d(S,{reserves:i(s).reservesReserved,hideModalToggle:$,handlerIdGet:R},{default:f(()=>[i(s).reserves.length>9?M((r(),o("div",Ke,null,512)),[[w,x]]):k("",!0)]),_:1},8,["reserves"])])):(r(),o("div",Qe,[d(y,{style:{width:"250px"},onClick:L},{default:f(()=>[b("In reserve")]),_:1}),We,d(S,{reserves:i(s).reserves,hideModalToggle:$,handlerIdGet:R},{default:f(()=>[i(s).reserves.length>9?M((r(),o("div",Xe,null,512)),[[w,x]]):k("",!0)]),_:1},8,["reserves"])])),d(j,{loading:i(s).loading},null,8,["loading"]),e("div",Ye,[d(E,{reserveInfo:i(s).reserveId,updateReserve:A},null,8,["reserveInfo"])])]))])}}};export{ss as default};
