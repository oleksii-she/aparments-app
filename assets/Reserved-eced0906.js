import{_ as B,b as U,o,c as n,a as e,F as V,B as z,E as O,t as l,x as g,a8 as D,d as m,q as C,e as E,Q as P,v as q,g as f,p as Q,k as J,l as F,ab as K,a7 as W,n as X,ai as Y,aj as Z,m as i,f as v,ak as L,h as w,y as M}from"./index-81164ad7.js";const ee={class:"wrapper"},se={class:"reserve-list"},te={class:"reserve"},re={class:"reserve__top"},oe={class:"reserve__title"},ne={key:0},ae={class:"reserve__description"},de=["onClick"],le={__name:"reserveMessageList",props:{reserves:Array,handlerIdGet:{type:Function,default:()=>{}}},setup(t){const h=t,u=U(),s=a=>{const _=D(),r=D(a);return r.isSame(_,"day")?r.format("HH:mm:ss"):r.format("MM.DD")},I=a=>{h.handlerIdGet(a),u.push(`/myaccount/reserved/${a}`)};return(a,_)=>(o(),n("div",ee,[e("ul",se,[(o(!0),n(V,null,z(t.reserves,r=>(o(),n("li",{class:"reserve-list__item",key:r._id},[e("div",te,[e("div",re,[e("p",oe,l(r.name),1),e("p",null,l(s(r.updatedAt)),1)]),e("p",null,l(r._id),1),r.apartmentName?(o(),n("p",ne,l(r.apartmentName),1)):g("",!0),e("p",ae,l(r.description),1),e("button",{onClick:p=>I(r._id)},"Show Info",8,de)])]))),128)),O(a.$slots,"default",{},void 0,!0)])]))}},S=B(le,[["__scopeId","data-v-812d2d4b"]]);const G=t=>(Q("data-v-66262a9a"),t=t(),J(),t),ie=F+"#icon-reserved",ce=F+"#icon-delete",ve={key:0,class:"wrapper-info"},_e={class:"header"},ue={class:"info"},fe={class:"info__header-text"},he={class:"info__email-link",href:"mailto:{{ reserveInfo.email }}"},pe={class:"button-box"},me=G(()=>e("use",{"xlink:href":ie},null,-1)),ge=[me],Ie=G(()=>e("button",{type:"",class:"button"},[e("svg",{class:"button__icon"},[e("use",{"xlink:href":ce})])],-1)),ye=["src"],$e={class:"price-date"},ke={class:"price-date__text"},be={class:"price-date__text"},xe={class:"price-date__text"},Re={class:"price-date__text"},we={class:"description-box"},Me={class:"description-box__date"},Se={class:"description-box__description"},De={key:1,class:"wrapper-info-default"},Te=G(()=>e("div",null,[e("h2",null,"Select a message to read it")],-1)),Ce=[Te],Ge={__name:"reserveMessageInfo",props:{reserveInfo:Object,updateReserve:{type:Function,default:()=>{}}},setup(t){const h=t,u=m(null);C(async()=>{if(h.reserveInfo&&typeof h.reserveInfo.reserved<"u"){const a=h.reserveInfo.reserved;u.value=a}});const s=a=>{const _=D(),r=D(a);return r.isSame(_,"day")?r.format("HH:mm:ss"):r.format("MM.DD")},I=a=>{u.value||(u.value=!0,h.updateReserve(a))};return(a,_)=>{const r=E("RouterLink");return t.reserveInfo?(o(),n("div",ve,[e("div",_e,[e("div",ue,[e("p",fe,"Name: "+l(t.reserveInfo.name),1),e("a",he,l(t.reserveInfo.email),1)]),e("div",pe,[e("button",{type:"",class:"button",onClick:_[0]||(_[0]=p=>I(t.reserveInfo.apartmentId))},[(o(),n("svg",{class:P(["button__icon-reserved",{"button__icon-reserved---active":u.value}])},ge,2))]),Ie])]),e("div",null,[t.reserveInfo.apartmentId?(o(),q(r,{key:0,to:{name:"review-page",params:{id:t.reserveInfo.apartmentId}},class:"wrapper-info__apartment-link"},{default:f(()=>[e("img",{src:t.reserveInfo.coverImage,alt:"",width:"64"},null,8,ye),e("p",null,l(t.reserveInfo.apartmentName),1)]),_:1},8,["to"])):g("",!0)]),e("div",null,[e("div",$e,[e("div",null,[e("p",ke,"sum: "+l(t.reserveInfo.sum)+"$",1),e("p",be,"number of days: "+l(t.reserveInfo.numberOfDays),1)]),e("div",null,[e("p",xe,"Start date: "+l(t.reserveInfo.startDate)+"$",1),e("p",Re,"End date: "+l(t.reserveInfo.endDate),1)])])]),e("div",we,[e("p",Me,l(s(t.reserveInfo.updatedAt)),1),e("p",Se,l(t.reserveInfo.description),1)])])):(o(),n("div",De,Ce))}}},N=B(Ge,[["__scopeId","data-v-66262a9a"]]);const Ae={class:"container"},Le={key:0,class:"reserved-wrapper reserved-mobile"},Ne={key:0},Be={key:0,class:"reserved-box"},Ee=e("h2",{style:{"text-align":"center","margin-bottom":"20px"}},"In reserve",-1),Fe={key:0},He={key:1,class:"reserved-box"},je=e("h2",{style:{"text-align":"center","margin-bottom":"20px"}},"Reserved",-1),Ue={key:0},Ve={key:1,class:"reserved-wrapper__info"},ze={key:1,class:"reserved-wrapper"},Oe={key:0,class:"reserved-box"},Pe=e("h2",null,"In reserve",-1),qe={key:0},Qe={key:1,class:"reserved-box"},Je=e("h2",null,"Reserved",-1),Ke={key:0},We={class:"reserved-wrapper__info"},Ye={__name:"Reserved",setup(t){const h=K(),{id:u}=h.params,s=W(),I=X(),a=m(null),_=m(!1),r=m(1);m(null);const p=m(!1),{isMobile:H}=Y(),j=m(null),T=m(!1);C(async()=>{await s.fetchGetAllReserve(),s.reserves.length!==s.totalReservePost&&await s.fetchGetAllReserve(r.value)}),C(async()=>{let c=a.value;c||(c=u),s.reserversIdInfo(c)});const y=()=>{_.value=!_.value},$=c=>{s.reserves<=9||c&&(s.reserves.length!==s.totalReservePost&&(r.value=1),console.log(c))},k=c=>{a.value=c,s.reserversIdInfo(u),c&&(T.value=!0)},A=async c=>{try{const d=await I.updateApartmentReserved(c,{reserved:!0});j.value=d.reserved,await s.fetchGetAllReserve()}catch(d){console.log(d.message)}};return(c,d)=>{const b=E("UButton"),x=Z("observe-visibility");return o(),n("div",Ae,[i(H)?(o(),n("div",Le,[v(L,{loading:i(s).loading},null,8,["loading"]),T.value?(o(),n("div",Ve,[e("button",{onClick:d[2]||(d[2]=R=>T.value=!1)},"назад"),v(N,{reserveInfo:i(s).reserveId,updateReserve:A},null,8,["reserveInfo"])])):(o(),n("div",Ne,[p.value?(o(),n("div",Be,[v(b,{style:{width:"150px",height:"50px"},onClick:d[0]||(d[0]=R=>p.value=!1)},{default:f(()=>[w("Reserved")]),_:1}),Ee,v(S,{reserves:i(s).reservesReserved,hideModalToggle:y,handlerIdGet:k},{default:f(()=>[i(s).reserves.length?M((o(),n("div",Fe,null,512)),[[x,$]]):g("",!0)]),_:1},8,["reserves"])])):(o(),n("div",He,[v(b,{style:{width:"150px",height:"50px"},onClick:d[1]||(d[1]=R=>p.value=!0)},{default:f(()=>[w("In reserve")]),_:1}),je,v(S,{reserves:i(s).reserves,hideModalToggle:y,handlerIdGet:k},{default:f(()=>[i(s).reserves.length?M((o(),n("div",Ue,null,512)),[[x,$]]):g("",!0)]),_:1},8,["reserves"])]))]))])):(o(),n("div",ze,[p.value?(o(),n("div",Oe,[v(b,{style:{width:"250px"},onClick:d[3]||(d[3]=R=>p.value=!1)},{default:f(()=>[w("Reserved")]),_:1}),Pe,v(S,{reserves:i(s).reservesReserved,hideModalToggle:y,handlerIdGet:k},{default:f(()=>[i(s).reserves.length>9?M((o(),n("div",qe,null,512)),[[x,$]]):g("",!0)]),_:1},8,["reserves"])])):(o(),n("div",Qe,[v(b,{style:{width:"250px"},onClick:d[4]||(d[4]=R=>p.value=!0)},{default:f(()=>[w("In reserve")]),_:1}),Je,v(S,{reserves:i(s).reserves,hideModalToggle:y,handlerIdGet:k},{default:f(()=>[i(s).reserves.length>9?M((o(),n("div",Ke,null,512)),[[x,$]]):g("",!0)]),_:1},8,["reserves"])])),v(L,{loading:i(s).loading},null,8,["loading"]),e("div",We,[v(N,{reserveInfo:i(s).reserveId,updateReserve:A},null,8,["reserveInfo"])])]))])}}};export{Ye as default};
