import{S as M,C as x}from"./containerAuth-3fc13955.js";import{_ as A,u as I,b,r as g,d as c,w as z,e as f,o as h,c as V,f as n,g as _,h as B,i as C,j as N,p as Z,k as E,a as k}from"./index-5ed2b513.js";const v=(o,t,m)=>({hasPassed:o.length>t&&o.length<m,message:o.length<t?"Поле має містити більше символів":"Поле має містити менше символів"}),w=o=>{const t=v(o,8,256);return t.hasPassed?{hasPassed:/^(?=.*[A-Za-z])(?=.*[\d])[a-zA-Z0-9]{7,256}$/.test(o),message:"Придумайте складніший пароль"}:t},L=o=>({hasPassed:/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/.test(o),message:"Невірно написаний email"});const $=o=>(Z("data-v-19dad14a"),o=o(),E(),o),R=["onSubmit"],j=$(()=>k("h2",{class:"form__title"},"Реєстрація",-1)),D={__name:"registrarion",setup(o){const t=I(),m=b(),a=g({name:"",email:"",phone:"",password:"",confirmPassword:""}),u=c(!1),p=c(!1),r=g({name:"",email:"",password:"",confirmPassword:""}),P=[{name:"name",validator:l=>v(l,3,10)},{name:"email",validator:L},{name:"password",validator:w},{name:"confirmPassword",validator:w}],U=c(!1);z(a,()=>{let l=!0;for(let e of P){const i=e.name,d=e.validator(a[i]);a[i]&&(d.hasPassed?r[i]="":(r[i]=d.message,l=!1))}a.confirmPassword&&(a.password!==a.confirmPassword?(r.password="Паролі не співпадають",r.confirmPassword="Паролі не співпадають",l=!1):(r.password="",r.confirmPassword="")),U.value=l});const S=async()=>{const l=N(a.phone),e={name:a.name,email:a.email,phone:l,password:a.password};if(!e.name||!e.email||!e.password||!e.phone)return console.log("Всі поля повинні бути заповненні");try{if(u.value)p.value=!0,await t.register(e),p.value=!1,m.push({name:"home"});else return console.log("Всі поля повинні бути заповненні")}catch{if(t.statusError){console.log(t.statusError);return}}};return(l,e)=>{const i=f("ULoader"),d=f("UInput"),y=f("UButton");return h(),V("form",{class:"form__auth",onSubmit:C(S,["prevent","stop"])},[j,n(i,{loading:p.value},null,8,["loading"]),n(d,{class:"input_margin",modelValue:a.name,"onUpdate:modelValue":e[0]||(e[0]=s=>a.name=s),placeholder:"Name",type:"text",errorMessage:r.name,"onUpdate:isValid":e[1]||(e[1]=s=>u.value=s)},null,8,["modelValue","errorMessage"]),n(d,{class:"input_margin",modelValue:a.email,"onUpdate:modelValue":e[2]||(e[2]=s=>a.email=s),placeholder:"Email",type:"email",errorMessage:r.email,"onUpdate:isValid":e[3]||(e[3]=s=>u.value=s)},null,8,["modelValue","errorMessage"]),n(d,{class:"input_margin",modelValue:a.phone,"onUpdate:modelValue":e[4]||(e[4]=s=>a.phone=s),placeholder:"Phone",type:"tel","onUpdate:isValid":e[5]||(e[5]=s=>u.value=s)},null,8,["modelValue"]),n(d,{class:"input_margin",modelValue:a.password,"onUpdate:modelValue":e[6]||(e[6]=s=>a.password=s),placeholder:"Password",type:"password",errorMessage:r.password},null,8,["modelValue","errorMessage"]),n(d,{class:"input_margin",modelValue:a.confirmPassword,"onUpdate:modelValue":e[7]||(e[7]=s=>a.confirmPassword=s),placeholder:"Confirm password",type:"password",errorMessage:r.confirmPassword},null,8,["modelValue","errorMessage"]),n(y,null,{default:_(()=>[B("Зареєструвати")]),_:1})],40,R)}}},T=A(D,[["__scopeId","data-v-19dad14a"]]),G={__name:"registrationPage",setup(o){return(t,m)=>(h(),V("main",null,[n(M,null,{default:_(()=>[n(x,null,{default:_(()=>[n(T)]),_:1})]),_:1})]))}};export{G as default};
